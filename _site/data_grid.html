<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>DataGrid-Bagisto</title>
        <link rel="stylesheet" href="assets/scss/layout.css" />
        <link rel="stylesheet" href="assets/css/syntax.css" />
        <link rel="icon" sizes="16x16" href="assets/images/icons/favicon.ico" />
    </head>
    <body>
        <div class="container">
            <div class="content-wrapper">
                <header class="header">
    <div class="logo-wrapper">
        <a href="/">
            <img class="logo" src="assets/images/logo.png" />
        </a>
        <span>Docs</span>
    </div>

    <nav class="menu-list">
        <ul>
            <li>
                <a class="nav-link" target="_blank" href="https://forums.bagisto.com/">Forum</a>
            </li>
            <li>
                <a class="nav-link" target="_blank" href="https://bagisto.com/en/blog/">Blogs</a>
            </li>
        </ul>
    </nav>
</header>

                <div class="content">
                    <div class="side-menu">
                        <div class="sidebar">
    <ul>
        <li class="menu-heading">
            <a href="index.html">Introduction</a>

            <ul class="sub-menu">
                <li>
                    <a href="index.html#requirements">Requirements</a>
                </li>

                <li>
                    <a href="index.html#installation">Installation & configuration</a>
                </li>

                <li>
                    <a href="index.html#directory_structure">Directory structure</a>
                </li>
            </ul>
        </li>

        <!-- Module Development -->
        <li class="menu-heading">
            <a href="create_package.html">Package development</a>

            <ul class="sub-menu">
                <li>
                    <a href="create_package.html#how-to-create-module">Creating a package</a>
                </li>

                <li>
                    <a href="create_package.html#add-menu">Adding menu in backend & storefront</a>
                </li>

                <li>
                    <a href="create_package.html#create-acl">Creating ACL</a>
                </li>

                <li>
                    <a href="create_package.html#custom-configuration">Custom configuration</a>
                </li>

                <li>
                    <a href="create_package.html#create_models">Creating models</a>

                    <ul>
                        <li>
                            <a href="create_package.html#about">Contracts, repositories & proxies</a>
                        </li>

                        <li>
                            <a href="create_package.html#store-data-through-repository">
                                Store data with repository
                            </a>
                        </li>
                    </ul>

                </li>
            </ul>
        </li>

        <!-- Advanced Topics -->

        <li class="menu-heading">
            <a href="override-core-model.html">Advance topics</a>

            <ul class="sub-menu">
                <li>
                    <a href="override-core-model.html">Override core models</a>
                </li>

                <li>
                    <a href="create_theme.html">Creating themes</a>
                </li>

                <li>
                    <a href="create_shipping_method.html">Creating shipping method</a>
                </li>

                <li>
                    <a href="create_payment_method.html">Creating Payment method</a>
                </li>

                <li>
                    <a href="render_event.html">View render event</a>
                </li>

                <li>
                    <a href="events.html">Events</a>
                </li>

                <li>
                    <a href="listen_event.html">Listen existing events</a>
                </li>

                <li>
                    <a href="data_grid.html">Data Grid</a>
                </li>
            </ul>
        </li>
    </ul>
</div>

                    </div>

                    <div class="right-content">
                        <h1 id="datagrid">DataGrid</h1>

<p><img src="/bagisto-docs/assets/images/icons/Icon-Pencil-Large.svg" alt="edit on github" class="pencil-icon" />
<a href="https://github.com/bagisto/bagisto-docs/blob/master/data_grid.md" class="edit-github" target="_blank">edit on github</a></p>

<p>DataGrid is just a concept of displaying your database records in tabular format. We have implemented this system in bagisto either you can use it to display data in tabular format or write code from scratch to display data in tabular format. In addition to datagrid, we have implemented additional features such as - sorting, filter, massAction . You may refer to below table for detail information about the features.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Webkul\Admin\DataGrids</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Webkul\Ui\DataGrid\DataGrid</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">DB</span><span class="p">;</span>

<span class="sd">/**
 * NewsLetterDataGrid Class
 *
 * @author Prashant Singh &lt;prashant.singh852@webkul.com&gt; @prashant-webkul
 * @copyright 2018 Webkul Software Pvt Ltd (http://www.webkul.com)
 */</span>
<span class="k">class</span> <span class="nc">NewsLetterDataGrid</span> <span class="k">extends</span> <span class="nx">DataGrid</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$index</span> <span class="o">=</span> <span class="s1">'id'</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$sortOrder</span> <span class="o">=</span> <span class="s1">'desc'</span><span class="p">;</span> <span class="c1">//asc or desc
</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">prepareQueryBuilder</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$queryBuilder</span> <span class="o">=</span> <span class="nx">DB</span><span class="o">::</span><span class="na">table</span><span class="p">(</span><span class="s1">'subscribers_list'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">addSelect</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'is_subscribed'</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setQueryBuilder</span><span class="p">(</span><span class="nv">$queryBuilder</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">addColumns</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">([</span>
            <span class="s1">'index'</span> <span class="o">=&gt;</span> <span class="s1">'id'</span><span class="p">,</span>
            <span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="nx">trans</span><span class="p">(</span><span class="s1">'admin::app.datagrid.id'</span><span class="p">),</span>
            <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'number'</span><span class="p">,</span>
            <span class="s1">'searchable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
            <span class="s1">'sortable'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'filterable'</span> <span class="o">=&gt;</span> <span class="kc">true</span>
        <span class="p">]);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">([</span>
            <span class="s1">'index'</span> <span class="o">=&gt;</span> <span class="s1">'is_subscribed'</span><span class="p">,</span>
            <span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="nx">trans</span><span class="p">(</span><span class="s1">'admin::app.datagrid.subscribed'</span><span class="p">),</span>
            <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'string'</span><span class="p">,</span>
            <span class="s1">'searchable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
            <span class="s1">'sortable'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'filterable'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'wrapper'</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span><span class="o">-&gt;</span><span class="na">is_subscribed</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">return</span> <span class="s1">'True'</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="k">return</span> <span class="s1">'False'</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">]);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">([</span>
            <span class="s1">'index'</span> <span class="o">=&gt;</span> <span class="s1">'email'</span><span class="p">,</span>
            <span class="s1">'label'</span> <span class="o">=&gt;</span> <span class="nx">trans</span><span class="p">(</span><span class="s1">'admin::app.datagrid.email'</span><span class="p">),</span>
            <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'string'</span><span class="p">,</span>
            <span class="s1">'searchable'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'sortable'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'filterable'</span> <span class="o">=&gt;</span> <span class="kc">true</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">prepareActions</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addAction</span><span class="p">([</span>
            <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'Edit'</span><span class="p">,</span>
            <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'GET'</span><span class="p">,</span> <span class="c1">// use GET request only for redirect purposes
</span>            <span class="s1">'route'</span> <span class="o">=&gt;</span> <span class="s1">'admin.customers.subscribers.edit'</span><span class="p">,</span>
            <span class="s1">'icon'</span> <span class="o">=&gt;</span> <span class="s1">'icon pencil-lg-icon'</span>
        <span class="p">]);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addAction</span><span class="p">([</span>
            <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'Delete'</span><span class="p">,</span>
            <span class="s1">'method'</span> <span class="o">=&gt;</span> <span class="s1">'POST'</span><span class="p">,</span> <span class="c1">// use GET request only for redirect purposes
</span>            <span class="s1">'route'</span> <span class="o">=&gt;</span> <span class="s1">'admin.customers.subscribers.delete'</span><span class="p">,</span>
            <span class="s1">'confirm_text'</span> <span class="o">=&gt;</span> <span class="nx">trans</span><span class="p">(</span><span class="s1">'ui::app.datagrid.massaction.delete'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'resource'</span> <span class="o">=&gt;</span> <span class="s1">'Exchange Rate'</span><span class="p">]),</span>
            <span class="s1">'icon'</span> <span class="o">=&gt;</span> <span class="s1">'icon trash-icon'</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<h3 id="global-properties-of-datagrid">Global Properties of DataGrid</h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>functionality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>index</td>
      <td>This variable is defined in  grid, and the value assign to this variable must be unique i.e., id so that data will be uniquely identified and operation  perform will be based on your index variable</td>
    </tr>
    <tr>
      <td>sortOrder</td>
      <td>sortOrder is used to arrange the order in ascending/descending in the dataGrid file, we have to set sortOrder variable to asc/desc</td>
    </tr>
    <tr>
      <td>queryBuilder</td>
      <td>It can be used to perform most database operations in your application</td>
    </tr>
    <tr>
      <td>enableMassAction</td>
      <td>this accept boolean values <code class="highlighter-rouge">true/false</code> to enable/disable the mass action on datagrid</td>
    </tr>
    <tr>
      <td>enableAction</td>
      <td>this accept boolean values <code class="highlighter-rouge">true/false</code> to enable/disable the action column of datagrid</td>
    </tr>
    <tr>
      <td>paginate</td>
      <td>While creating your grid file you have to declare paginate variable and set it to <code class="highlighter-rouge">true</code> to allow pagination on your page</td>
    </tr>
    <tr>
      <td>itemsPerPage</td>
      <td>In itemsPerPage, a numeric value is assigned to <code class="highlighter-rouge">itemsPerPage</code> variable to display items per page</td>
    </tr>
    <tr>
      <td>enableFilterMap</td>
      <td>this accept boolean values <code class="highlighter-rouge">true/false</code> to enable/disable the filter on the basis of columns</td>
    </tr>
  </tbody>
</table>

<h3 id="steps-for-how-to-create-datagrid">Steps for how to create DataGrid</h3>

<ol>
  <li>
    <p>Create a folder ‘DataGrid’ in your package, inside it create a file for your datagrid folder.</p>
  </li>
  <li>
    <p>We have created <code class="highlighter-rouge">DataGrid</code> abstract class in  <code class="highlighter-rouge">UI</code> package. In DataGrid file, a list of properties and methods are declared. So, while creating datagrid only you have to extend the DataGrid abstract class and use it in your datagrid file.</p>
  </li>
  <li>
    <p>In DataGrid abstract class, two abstract methods are declared <code class="highlighter-rouge">prepareQueryBuilder()</code> and <code class="highlighter-rouge">addColumns()</code> . We can prepare  grid by defining these two methods</p>

    <ul>
      <li>
        <p><strong>prepareQueryBuilder()</strong> : In this method, records are retrieved through queries that is applicable on database and stored in a array. When records are retrieved,                           <code class="highlighter-rouge">$this-&gt;setQueryBuilder($queryBuilder)</code>
 setQueryBuilder method is called</p>

        <ul>
          <li><strong><em>setQueryBuilder()</em></strong> : This method written in DataGrid file of UI package. This is used for setting the <code class="highlighter-rouge">$queryBuilder</code> array</li>
        </ul>
      </li>
      <li>
        <p><strong>addColumns()</strong> : In this method, the columns are created to be displayed in grid. Inside this method, <code class="highlighter-rouge">addColumn()</code> is called to create single column. Inside this function, parameter accepts the array in <code class="highlighter-rouge">"key" =&gt; "value"</code> pairs. Some of the essential keys are described below :</p>
      </li>
    </ul>

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>functionality</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>index</td>
          <td>This variable is defined in  grid, and the value assign to this variable must be unique i.e., id so that data will be uniquely identified and operation  perform will be based on your index variable</td>
        </tr>
        <tr>
          <td>label</td>
          <td>in this key, the name of column is defined</td>
        </tr>
        <tr>
          <td>type</td>
          <td>this key accept the type of data in column</td>
        </tr>
        <tr>
          <td>searchable</td>
          <td>this accept boolean values <code class="highlighter-rouge">true/false</code> to make the column searchable</td>
        </tr>
        <tr>
          <td>sortable</td>
          <td>this accept boolean values <code class="highlighter-rouge">true/false</code> to make the column sortable</td>
        </tr>
        <tr>
          <td>filterable</td>
          <td>this accept boolean values <code class="highlighter-rouge">true/false</code> to make the column filterable</td>
        </tr>
        <tr>
          <td>wrapper</td>
          <td> </td>
        </tr>
      </tbody>
    </table>

    <ul>
      <li>
        <p><strong>prepareActions()</strong> : Additionally, this method is defined when there is need to perform any action such as edit or delete on grid. Inside it, <code class="highlighter-rouge">addAction()</code> is called to define particular action</p>

        <ul>
          <li><strong><em>addAction()</em></strong> : It is defined when you want to add action a number of times for individual action to be performed on grid</li>
        </ul>
      </li>
    </ul>

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>functionality</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>type</td>
          <td>Edit/delete</td>
        </tr>
        <tr>
          <td>method</td>
          <td>HTTP verbs are written on basis of operation</td>
        </tr>
        <tr>
          <td>route</td>
          <td>this key accept the route of icon</td>
        </tr>
        <tr>
          <td>icon</td>
          <td>class of icon to be displayed in action column you may prefer text also</td>
        </tr>
        <tr>
          <td>confirm_text</td>
          <td>A confirm box is open on clicking action icon  if you want the user to verify or accept something. you can include message here</td>
        </tr>
        <tr>
          <td>label</td>
          <td>the text to be displayed in written here, you may use translation also here</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>

<h3 id="warning"><strong><em>Warning</em></strong></h3>

<ul>
  <li>
    <p><strong><em>Use JavaScripts with wrapper perperty set to true when really needed</em></strong></p>
  </li>
  <li>
    <p><strong><em>Return static blade files loaded with scripts in it with caution</em></strong></p>
  </li>
</ul>

                    </div>
                </div>
            </div>
        </div>
    </body>
</html>